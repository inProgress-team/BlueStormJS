<div page-title>
    Projet {{projectsApi.project.name}}
</div>



<div ng-if="tasksApi.isProcessing || serverApi.isProcessing">
    <div class="col-md-8">
        <!-- TASKS -->
        <div ng-if="tasksApi.isProcessing">
            <h2 class="text-center" ng-if="tasksApi.tasks.count">
                <span ng-if="!tasksApi.tasks.seconds">Executing {{tasksApi.tasks.count}} tasks.</span>
                <span ng-if="tasksApi.tasks.seconds">Done in {{tasksApi.tasks.seconds}} seconds.</span>
            </h2>
            <h2 class="text-center" ng-if="!tasksApi.tasks.count">-</h2>

            <div class="progress" style="margin-bottom:0;">
                <div class="progress-bar" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="100" style="width: {{(tasksApi.tasks.done/tasksApi.tasks.count)*100}}%;">
                    <span ng-if="tasksApi.tasks.count">{{((tasksApi.tasks.done/tasksApi.tasks.count)*100).toFixed(0)}}%</span>
                    <span ng-if="!tasksApi.tasks.count">0%</span>
                </div>
            </div>
        </div>



        <!-- SERVER -->
        <div class="btn-group btn-group-justified" role="group">
            <a href ng-disabled="!app.port || app.name=='socket'" ng-href="http://localhost:{{app.port}}" target="_blank"
            class="btn" ng-class="{'btn-success': app.status=='up', 'btn-danger': app.status=='down'}"
            ng-repeat="app in serverApi.apps">
            {{app.name}} <span ng-if="app.port">({{app.port}})</span>
        </a>
        <a href class="btn btn-default btn-block" ng-click="tasksApi.kill();serverApi.kill()"><i class="fa fa-remove"></i></a>
    </div>


<!--
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">DÃ©veloppement</h3>
            </div>
            <div class="panel-body">


            </div>
        </div> -->
    </div>

    <div class="col-md-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Messages</h3>
            </div>
            <div class="panel-body">
                <pre>{{tasksApi|json}}</pre>
            </div>
        </div>
    </div>
</div>


<div ng-if="!tasksApi.isProcessing && !serverApi.isProcessing">
    <div class="col-md-3 col-md-offset-3">
        <div class="well" style="height:200px;">
            <br><br><br>
            <a href class="btn btn-default btn-block" ng-click="startFrontend();">Start Frontend</a>
        </div>
    </div>
    <div class="col-md-3">
        <div class="well" style="height:200px;">
            <br><br><br>
            <a href class="btn btn-default btn-block" ng-click="serverApi.development.start();">Start Backend</a>
        </div>
    </div>

    <div class="col-md-12 col-md-offset-3">
        <div data-frontend-apps-chooser></div>
    </div>

</div>


